\documentclass[a4paper, 12pt]{article}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{color}
\usepackage{dsfont}
\usepackage[left=1.5cm, right=1.5cm, bottom=2cm, top=2cm]{geometry}
\usepackage{graphicx}
\usepackage[utf8]{inputenc}
\usepackage{microtype}
\usepackage{natbib}
\definecolor{ao(english)}{rgb}{0.0, 0.5, 0.0}

\newcommand{\bjb}{\color{ao(english)}}
\newcommand{\btheta}{\boldsymbol{\theta}}
\newcommand{\given}{\,|\,}

\title{Kernel-Based LBRY Trending}
\author{Brendon J. Brewer}
\date{}

\begin{document}
\maketitle

%\abstract{\noindent For Kevin Knuth.}

% Need this after the abstract
\setlength{\parindent}{0pt}
\setlength{\parskip}{8pt}

Consider an LBC change from $x$ to $x'$ which occurs at time (height) $t_0$.
At the moment, assume positive changes only, i.e., $x' > x$.
Let $\delta$ be the delay, so the kernel peaks at time $t_1 = t_0 + \delta$.
The kernel then returns to zero at time $t_2 = t_1 + \ell$.

Let the kernel due to this LBC change be of the form
\begin{align}
K(t) &=
    \left\{
        \begin{array}{lr}
            0, & t < t_0 \\
            A\left(\frac{t - t_0}{\delta}\right)^{\alpha-1}, & t_0 \leq t < t_1 \\
            A\left(\frac{t_2 - t}{\ell}  \right)^{\alpha-1}, & t_1 \leq t < t_2 \\
            0, & t \geq t_2.
        \end{array}
    \right.
\end{align}
The reason for making the exponents $(\alpha-1)$ instead of $\alpha$ is
so I can make analogies to Beta distributions. The normalisation of Beta
distributions is
\begin{align}
\int_0^1 x^{\alpha-1}(1-x)^{\beta-1} \, dx
    &= \frac{\Gamma(\alpha)\Gamma(\beta)}{\Gamma(\alpha+\beta)}.
\end{align}

The integral of the rising part of the kernel is
\begin{align}
Z_{\rm rise} &= A\int_{t_0}^{t_0+\delta}
                    \left(\frac{t - t_0}{\delta}\right)^{\alpha-1} \, dt
\end{align}
Letting $\tau = (t-t_0)/\delta$, this becomes
\begin{align}
Z_{\rm rise} &= A\delta\int_0^1
                    \tau^{\alpha-1} \, d\tau \\
             &= A\delta
                    \frac{\Gamma(\alpha)\Gamma(1)}{\Gamma(\alpha+1)} \\
             &= \frac{A\delta}{\alpha}.
\end{align}
The integral of the falling part, and therefore the total integral $Z$,
can be obtained similarly. The total integral is
\begin{align}
Z &= \frac{A(\delta + \ell)}{\alpha}
\end{align}


Let's quantify the effective log-duration of a kernel by the Shannon entropy of
its normalised version. The normalised kernel, in which $A$ no longer appears,
is given by
\begin{align}
K_{\rm normed}(t) &=
    \frac{\alpha+1}{\ell+\delta}
    \left\{
        \begin{array}{lr}
            0, & t < t_0 \\
            \left(\frac{t - t_0}{\delta}\right)^\alpha, & t_0 \leq t < t_1 \\
            \left(\frac{t_2 - t}{\ell}  \right)^\alpha, & t_1 \leq t < t_2 \\
            0, & t \geq t_2.
        \end{array}
    \right.
\end{align}
Its Shannon entropy is
\begin{align}
H &= -\int K_{\rm normed}(t) \log K_{\rm normed}(t) \, dt.
\end{align}
This will split into a sum of the rising and falling parts, which are of
similar form. The rising part is
\begin{align}
H_{\rm rise} &= -\int_{t_0}^{t_1}
                    \left(\frac{\alpha+1}{\ell+\delta}\right)
                    \left(\frac{t - t_0}{\delta}\right)^\alpha
                    \Big[
                        \log(\alpha + 1) - \log(\ell + \delta)
                        + \alpha\log(t - t_0) - \alpha\log\delta
                    \Big]
                    \, dt.
\end{align}


\end{document}

